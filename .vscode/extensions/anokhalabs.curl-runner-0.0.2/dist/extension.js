(()=>{"use strict";var e={265:function(e,t,n){var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&i(t,e,n[s]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){console.log("Curl Comment Runner is now active!"),e.subscriptions.push(c.languages.registerCodeLensProvider([{scheme:"file",language:"javascript"},{scheme:"file",language:"python"},{scheme:"file",language:"typescript"}],new a));const t=c.commands.registerCommand("curlCommentRunner.runCurl",u);e.subscriptions.push(t)},t.deactivate=function(){console.log("Curl Comment Runner is being deactivated")};const c=s(n(398));async function u(e){const t=c.window.activeTextEditor;if(!t)return void c.window.showErrorMessage("No active text editor!");let n=e;if(!n){const e=t.selection;n=e.isEmpty?t.document.lineAt(e.start.line).text:t.document.getText(e)}n=n.trim();const r=n.indexOf("curl");if(-1===r)return void c.window.showErrorMessage("No 'curl' found in the provided command.");n=n.substring(r).trim();const i="Curl Runner";let o=c.window.terminals.find((e=>e.name===i));o||(o=c.window.createTerminal(i)),o.show(!0),o.sendText(n)}class a{provideCodeLenses(e,t){const n=[],r=e.getText().split(/\r?\n/);let i=0;for(;i<r.length;){const e=r[i];if(!this.removeCommentPrefix(e).trim().includes("curl")){i++;continue}const t=[],o=i;let s=!1;for(;i<r.length;){let e=this.removeCommentPrefix(r[i]).trim();if(t.length>0&&!e)break;if(e.endsWith("\\")){s=!0,e=e.slice(0,-1).trim(),t.push(e),i++;continue}const n=i+1<r.length?r[i+1]:null;if(!(n&&this.isCommentLine(n)&&(e.endsWith("{")||e.endsWith(",")||this.removeCommentPrefix(n).trim().startsWith("-")||this.isIncompleteJson(`${t.join(" ")} ${e}`)))){t.push(e),i++;break}s=!0,t.push(e),i++}const u=t.join(" ").replace(/\s+/g," "),a=new c.Range(new c.Position(o,0),new c.Position(o,r[o].length));n.push(new c.CodeLens(a,{title:"Run",tooltip:"Run this curl command in the integrated terminal",command:"curlCommentRunner.runCurl",arguments:[u]}))}return n}isCommentLine(e){const t=e.trim();return t.startsWith("//")||t.startsWith("#")||t.startsWith("/*")||t.startsWith("*")}isIncompleteJson(e){return(e.match(/{/g)||[]).length>(e.match(/}/g)||[]).length}removeCommentPrefix(e){const t=e.trim();return t.startsWith("//")?t.slice(2):t.startsWith("#")?t.slice(1):t.startsWith("/*")?t.slice(2):t.startsWith("*")?t.slice(1):t}}},398:e=>{e.exports=require("vscode")}},t={},n=function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(265);module.exports=n})();